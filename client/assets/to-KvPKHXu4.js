import{w as b}from"./with-props-Dsx2TLUA.js";import{q as R,r as p,l as m}from"./chunk-IR6S3I6Y-Cflp3U6u.js";function I(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function T(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function y(t,i,e){return i&&T(t.prototype,i),t}function _(t){return+t.replace(/px/,"")}function w(t){var i=window.devicePixelRatio,e=getComputedStyle(t),n=_(e.getPropertyValue("width")),a=_(e.getPropertyValue("height"));t.setAttribute("width",(n*i).toString()),t.setAttribute("height",(a*i).toString())}function d(t,i){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=Math.random()*(i-t)+t;return Math.floor(n*Math.pow(10,e))/Math.pow(10,e)}function N(t){return t[d(0,t.length)]}var x=.00125,F=5e-4,O=9e-4,M=1e-5,D=6,k=80,L=.9,z=1.7,B=.2,q=.6,U=.03,H=.07,V=15,W=82,X=100,G=250,Y=40,$=["#fcf403","#62fc03","#f4fc03","#03e7fc","#03fca5","#a503fc","#fc03ad","#fc03c2"];function j(t){var i=1920;return Math.log(t)/Math.log(i)}var E=function(){function t(i){I(this,t);var e=i.initialPosition,n=i.direction,a=i.confettiRadius,o=i.confettiColors,r=i.emojis,h=i.emojiSize,c=i.canvasWidth,l=d(L,z,3),s=l*j(c);this.confettiSpeed={x:s,y:s},this.finalConfettiSpeedX=d(B,q,3),this.rotationSpeed=r.length?.01:d(U,H,3)*j(c),this.dragForceCoefficient=d(F,O,6),this.radius={x:a,y:a},this.initialRadius=a,this.rotationAngle=n==="left"?d(0,.2,3):d(-.2,0,3),this.emojiSize=h,this.emojiRotationAngle=d(0,2*Math.PI),this.radiusYUpdateDirection="down";var f=n==="left"?d(W,V)*Math.PI/180:d(-15,-82)*Math.PI/180;this.absCos=Math.abs(Math.cos(f)),this.absSin=Math.abs(Math.sin(f));var u=d(-150,0),v={x:e.x+(n==="left"?-u:u)*this.absCos,y:e.y-u*this.absSin};this.currentPosition=Object.assign({},v),this.initialPosition=Object.assign({},v),this.color=r.length?null:N(o),this.emoji=r.length?N(r):null,this.createdAt=new Date().getTime(),this.direction=n}return y(t,[{key:"draw",value:function(e){var n=this.currentPosition,a=this.radius,o=this.color,r=this.emoji,h=this.rotationAngle,c=this.emojiRotationAngle,l=this.emojiSize,s=window.devicePixelRatio;o?(e.fillStyle=o,e.beginPath(),e.ellipse(n.x*s,n.y*s,a.x*s,a.y*s,h,0,2*Math.PI),e.fill()):r&&(e.font="".concat(l,"px serif"),e.save(),e.translate(s*n.x,s*n.y),e.rotate(c),e.textAlign="center",e.fillText(r,0,0),e.restore())}},{key:"updatePosition",value:function(e,n){var a=this.confettiSpeed,o=this.dragForceCoefficient,r=this.finalConfettiSpeedX,h=this.radiusYUpdateDirection,c=this.rotationSpeed,l=this.createdAt,s=this.direction,f=n-l;if(a.x>r&&(this.confettiSpeed.x-=o*e),this.currentPosition.x+=a.x*(s==="left"?-this.absCos:this.absCos)*e,this.currentPosition.y=this.initialPosition.y-a.y*this.absSin*f+x*Math.pow(f,2)/2,this.rotationSpeed-=this.emoji?1e-4:M*e,this.rotationSpeed<0&&(this.rotationSpeed=0),this.emoji){this.emojiRotationAngle+=this.rotationSpeed*e%(2*Math.PI);return}h==="down"?(this.radius.y-=e*c,this.radius.y<=0&&(this.radius.y=0,this.radiusYUpdateDirection="up")):(this.radius.y+=e*c,this.radius.y>=this.initialRadius&&(this.radius.y=this.initialRadius,this.radiusYUpdateDirection="down"))}},{key:"getIsVisibleOnCanvas",value:function(e){return this.currentPosition.y<e+X}}]),t}();function J(){var t=document.createElement("canvas");return t.style.position="fixed",t.style.width="100%",t.style.height="100%",t.style.top="0",t.style.left="0",t.style.zIndex="1000",t.style.pointerEvents="none",document.body.appendChild(t),t}function Z(t){var i=t.confettiRadius,e=i===void 0?D:i,n=t.confettiNumber,a=n===void 0?t.confettiesNumber||(t.emojis?Y:G):n,o=t.confettiColors,r=o===void 0?$:o,h=t.emojis,c=h===void 0?t.emojies||[]:h,l=t.emojiSize,s=l===void 0?k:l;return t.emojies&&console.error("emojies argument is deprecated, please use emojis instead"),t.confettiesNumber&&console.error("confettiesNumber argument is deprecated, please use confettiNumber instead"),{confettiRadius:e,confettiNumber:a,confettiColors:r,emojis:c,emojiSize:s}}var K=function(){function t(i){var e=this;I(this,t),this.canvasContext=i,this.shapes=[],this.promise=new Promise(function(n){return e.resolvePromise=n})}return y(t,[{key:"getBatchCompletePromise",value:function(){return this.promise}},{key:"addShapes",value:function(){var e;(e=this.shapes).push.apply(e,arguments)}},{key:"complete",value:function(){var e;return this.shapes.length?!1:((e=this.resolvePromise)===null||e===void 0||e.call(this),!0)}},{key:"processShapes",value:function(e,n,a){var o=this,r=e.timeDelta,h=e.currentTime;this.shapes=this.shapes.filter(function(c){return c.updatePosition(r,h),c.draw(o.canvasContext),a?c.getIsVisibleOnCanvas(n):!0})}}]),t}(),Q=function(){function t(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};I(this,t),this.activeConfettiBatches=[],this.canvas=i.canvas||J(),this.canvasContext=this.canvas.getContext("2d"),this.requestAnimationFrameRequested=!1,this.lastUpdated=new Date().getTime(),this.iterationIndex=0,this.loop=this.loop.bind(this),requestAnimationFrame(this.loop)}return y(t,[{key:"loop",value:function(){this.requestAnimationFrameRequested=!1,w(this.canvas);var e=new Date().getTime(),n=e-this.lastUpdated,a=this.canvas.offsetHeight,o=this.iterationIndex%10===0;this.activeConfettiBatches=this.activeConfettiBatches.filter(function(r){return r.processShapes({timeDelta:n,currentTime:e},a,o),o?!r.complete():!0}),this.iterationIndex++,this.queueAnimationFrameIfNeeded(e)}},{key:"queueAnimationFrameIfNeeded",value:function(e){this.requestAnimationFrameRequested||this.activeConfettiBatches.length<1||(this.requestAnimationFrameRequested=!0,this.lastUpdated=e||new Date().getTime(),requestAnimationFrame(this.loop))}},{key:"addConfetti",value:function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=Z(e),a=n.confettiRadius,o=n.confettiNumber,r=n.confettiColors,h=n.emojis,c=n.emojiSize,l=this.canvas.getBoundingClientRect(),s=l.width,f=l.height,u=f*5/7,v={x:0,y:u},C={x:s,y:u},g=new K(this.canvasContext),S=0;S<o/2;S++){var A=new E({initialPosition:v,direction:"right",confettiRadius:a,confettiColors:r,confettiNumber:o,emojis:h,emojiSize:c,canvasWidth:s}),P=new E({initialPosition:C,direction:"left",confettiRadius:a,confettiColors:r,confettiNumber:o,emojis:h,emojiSize:c,canvasWidth:s});g.addShapes(A,P)}return this.activeConfettiBatches.push(g),this.queueAnimationFrameIfNeeded(),g.getBatchCompletePromise()}},{key:"clearCanvas",value:function(){this.activeConfettiBatches=[]}},{key:"destroyCanvas",value:function(){this.canvas.remove()}}]),t}();function ne({}){return[{title:"Valentines"},{name:"description",content:"Happy Valentines Day"}]}const ee=["❤️","💖","💗","💓","💕","💞","💘","💝","💟","🌹","💐","🥀","💌","📜","✉️","🧸","🎁","🎀","🍫","🍬","🍩","🍪","🍰","🍷","🍾","💑","👩‍❤️‍👨","👩‍❤️‍👩","👨‍❤️‍👨","❤️‍🔥","😍","😘","😻"],se=b(function(){const[i]=R(),e=p.useRef(null),[n,a]=p.useState(0),[o,r]=p.useState(!1),[h,c]=p.useState(!1);p.useEffect(()=>{const s=new Q;return e.current=s,()=>{s.destroyCanvas()}},[]);const l=async()=>{var f;c(!0),a(u=>++u);let s=o?30:1;for(let u=0;u<s;u++){const v=ee.sort(()=>Math.random()-.5).slice(0,5);(f=e.current)==null||f.addConfetti({emojis:v}),await new Promise(C=>setTimeout(C,15))}c(!1)};return m.jsx("section",{className:"grid place-items-center h-screen",children:m.jsxs("div",{className:"bg-white p-8 rounded-xl max-w-lg w-full shadow",children:[m.jsxs("h1",{children:["Dear ",m.jsx("span",{className:"font-bold",children:i.get("name")??"Friend"}),","]}),m.jsx("p",{className:"mt-4",children:"May your heart ❤️ be filled with joy, love, and wonderful moments."}),m.jsx("p",{className:"mt-4 font-bold text-pink-500",children:"Happy Valentines Day"}),m.jsx("button",{className:"h-10 bg-pink-600 rounded-lg px-4 text-white mt-8 hover:opacity-70 font-semibold transition-all w-full disabled:opacity-30",onClick:l,disabled:h,children:"Click Me"}),n>0&&m.jsxs("div",{className:"flex items-center mt-2 justify-center",children:[m.jsx("input",{id:"crazy",type:"checkbox",className:"text-pink-500 rounded-sm focus:ring-pink-500",checked:o,onChange:()=>r(s=>!s)}),m.jsx("label",{className:"pl-2",htmlFor:"crazy",children:"I'm greedy"})]})]})})});export{se as default,ne as meta};
